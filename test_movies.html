<!-- 1. HTML container for the dynamic content -->
<div id="movies-widget">
  <h3>Recently Watched Movies</h3>
  <ul id="moviesList">Loading...</ul>  <!-- this will be populated by JS -->
</div>

<!-- 2. JavaScript to fetch and display Google Sheet data -->
<script>
  // Replace with your actual Google Sheet CSV export URL
  const sheetURL = 'https://docs.google.com/spreadsheets/d/1ZkLKODghND7aI2v5qy6xXUmK_FgJk_rntaGXc9X0uVg/edit?usp=sharing';
  
  fetch(sheetURL)
    .then(response => response.text())
    .then(csvText => {
      const lines = csvText.split('\n').filter(line => line.trim()); 
      const headers = lines[0].split(',');  // e.g., ["Title","Year"]
      const movies = lines.slice(1).map(line => {
        // Simple CSV row parse (split by comma). 
        // Note: If movie titles contain commas, consider using a CSV parsing library or an alternate delimiter.
        const cols = line.split(',');
        return { title: cols[0], year: cols[1] };
      });
      
      const listEl = document.getElementById('moviesList');
      listEl.innerHTML = ""; // clear "Loading..." text
      
      movies.forEach(movie => {
        const li = document.createElement('li');
        li.textContent = `${movie.title} (${movie.year})`;
        listEl.appendChild(li);
      });
    })
    .catch(err => {
      console.error('Error fetching movie data:', err);
      document.getElementById('moviesList').textContent = "Unable to load data.";
    });
</script>
